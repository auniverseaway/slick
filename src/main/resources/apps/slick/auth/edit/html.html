<!DOCTYPE html>
  <html lang="en">
    <sly data-sly-include="../head.html" data-sly-unwrap></sly>


  <body data-sly-use.page="${'net.zum.slick.Page'}">
    <sly data-sly-include="../header.html" data-sly-unwrap></sly>
    
    <section id="content-editor" data-sly-use.request="${'net.zum.slick.SlickRequest'}">
      <div class="container">
        <h1>${page.title}</h1>
        
        <sly data-sly-test.edit="${request.edit}" data-sly-unwrap>
          <form method="POST" action="${request.page.path}" enctype="multipart/form-data">
        </sly>
        <sly data-sly-test="${!edit}" data-sly-unwrap>
          <form method="POST" action="/content/slick/${properties.slickType}/*" enctype="multipart/form-data">
        </sly>

          <div class="form-group">
            <!-- Post Title -->
            <sly data-sly-test.edit="${request.edit}" data-sly-unwrap>
              <input name="title" type="text" class="form-control" value="${request.page.title}" placeholder="enter title">
              <input name=":name" id="slug" type="hidden" value="${request.page.title}" class="form-control">
            </sly>
            <sly data-sly-test="${!edit}" data-sly-unwrap>
              <input name="title" type="text" class="form-control" value="" placeholder="enter title">
              <input name=":name" id="slug" type="hidden" class="form-control">
              <input name=":redirect" type="hidden" value="/content/slick/auth/${properties.slickType}.html"/>
            </sly>
            
            <input name="sling:resourceType" type="hidden" value="slick:pub:view">
          </div>
          <div class="form-group">

            <script src="/content/slick/themes/slick/js/libs/wysihtml/wysihtml5x-toolbar.min.js"></script>

            
            <script src="/content/slick/themes/slick/js/libs/wysihtml/advanced_and_extended.js"></script>
            <div id="toolbar" style="display: none;">
             
	            <!-- Bold  -->
	            <div class="edit-command">
	              <a data-wysihtml5-command="bold" title="CTRL+B">Bold</a>
	            </div>
	            <!-- Italic  -->
	            <div class="edit-command">
	            	<a data-wysihtml5-command="italic" title="CTRL+I">Italic</a>
	            </div>
	            <!-- Create Link  -->
	            <div class="edit-command">
	              	<a data-wysihtml5-command="createLink">Link</a>
	              	<div style="display:none;" data-wysihtml5-dialog="createLink">
		                <label>
		                  Link:
		                  <input data-wysihtml5-dialog-field="href" value="http://">
		                </label>
		                <a data-wysihtml5-dialog-action="save">OK</a>
		                <a data-wysihtml5-dialog-action="cancel">Cancel</a>
	              	</div>
	            </div>

	            <div class="edit-command">
	              <a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="pre">code</a>
	            </div>

            	<!-- View Source -->
	            <div class="edit-command">
	              <a data-wysihtml5-action="change_view">Switch View</a>
	            </div>
            </div>
            

            <sly data-sly-test.edit="${request.edit}" data-sly-unwrap>
              <textarea name="content" id="editor" class="editor-area" rows="32" placeholder="add content">${request.page.content}</textarea>
            </sly>
            <sly data-sly-test="${!edit}" data-sly-unwrap>
              <textarea name="content" id="editor" class="editor-area" rows="32" placeholder="add content"></textarea>
            </sly>


          	<script>
              var editor = new wysihtml5.Editor('editor', {
                toolbar: 'toolbar',
                contentEditableMode: true,
                parserRules: { 
                  tags: 
                  { br: {}, 
                    span: {}, 
                    div: {},
                    pre: {}, 
                    p: {},
                    "a": {
                        "check_attributes": {
                          "href": "url" // make sure the entered url is really an url
                        }
                      }
                  },
                  classes: {},
                      
                  },
                useLineBreaks:        false,
              });

              //editorInstance.composer.commands.exec("formatBlock", "pre");
            </script>
          </div>
          <input type="submit" value="Post" class="button">
        </form>
      </div>  
    </section>

    
    <sly data-sly-include="../footer.html" data-sly-unwrap></sly>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    

    <script src="/content/slick/themes/slick/js/app.js"></script>
    <script src="/content/slick/themes/slick/js/auth.js"></script>
  </body>
</html>